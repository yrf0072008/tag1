## 华为交换机登录的三种方式

1. console口登录，缺省情况下，用户可以直接通过Console口本地登录设备，登录时认证方式为None（不需要用户名和密码），登录用户级别为3

2. 通过telnet方式登录（默认未开启telnet服务），先用console口登录进行配置：

   ```
   ·     开启设备的Telnet功能（缺省情况下，Telnet功能关闭）
   
   ·     配置设备VLAN接口的IP地址，确保设备与Telnet登录用户间路由可达（缺省情况下，设备没有IP地址）
   
   ·     配置VTY用户的认证方式（缺省情况下，VTY用户采用Password认证方式）
   
   ·     配置VTY用户的用户级别（缺省情况下，VTY用户的用户级别为0）
   ```

3. 配置通过SSH方式登录：

   ```
   ·     开启设备SSH功能并完成SSH属性的配置（缺省情况下，SSH功能关闭）
   
   ·     配置设备VLAN接口的IP地址，确保设备与SSH登录用户间路由可达（缺省情况下，设备没有配置IP地址）
   
   ·     配置VTY用户的认证方式为scheme（缺省情况下，VTY用户采用Password认证方式）
   
   ·     配置VTY用户的用户级别（缺省情况下，VTY用户的用户级别为0）
   ```

4. 两种类型的用户界面：
```
· AUX用户界面：用来管理和监控通过Console口登录的用户。Console口端口类型为EIA/TIA-232 DCE。

· VTY（Virtual Type Terminal，虚拟类型终端）用户界面：用来管理和监控通过VTY方式登录的用户。VTY口属于逻辑终端线，用于对设备进行Telnet或SSH访问。
```

5. Console口支持的认证方式有none、password和scheme三种。

   ```
   · 认证方式为none：表示下次使用Console口本地登录设备时，不需要进行用户名和密码认证、任何人都可以通过Console口登录到设备上，这种情况可能会带来安全隐患。
   1.system-view
   2.user-interface aux first-number [ last-number ]
   3.authentication-mode none
   
   · 认证方式为password：表示下次使用Console口本地登录设备时，需要进行密码认证、只有密码认证成功、用户才能登录到设备上。
   1.system-view
   2.user-interface aux first-number [ last-number ]
   3.authentication-mode password
   4.set authentication password [ hash ] { cipher | simple } password
   
   · 认证方式为scheme：表示下次使用Console口登录设备时需要进行用户名和密码认证，用户名或密码错误，均会导致登录失败。用户认证又分为本地认证和远程认证，如果采用本地认证，则需要配置本地用户及相应参数；如果采用远程认证，则需要在远程认证服务器上配置用户名和密码。有关用户认证方式及参数的详细介绍请参见“安全配置指导”中的“AAA”。
   1.system-view
   2.user-interface aux first-number [ last-number ]
   3.authentication-mode  scheme
   4.local-user user-name（创建本地用户）
   5.password { cipher | simple  } password（配置密码）
   6.authorization-attribute level level（为此用户定义级别）
   7.service-type terminal（设置本地用户的服务类型）
   ```

6.  配置通过Telnet登录设备,认证方式有none、password和scheme三种。

   ```
   · 认证方式为none：
   1.system-view
   2.telnet server enable（开启telnet服务）
   3.user-interface vty first-number [ last-number ]（进入一个或多个用户）
   4.user privilege level level（配置等级，3是最高级）
   
   · 认证方式为password：
   1.system-view
   2.telnet server enable（开启telnet服务）
   3.user-interface vty first-number [ last-number ]（进入一个或多个用户）
   4.authentication-mode password
   5.set authentication password [ hash ] { cipher | simple } password
   6.user privilege level level（配置等级，3是最高级）
   
   · 认证方式为AAA认证（Scheme）：
   1.system-view
   2.telnet server enable（开启telnet服务）
   3.user-interface vty first-number [ last-number ]（进入一个或多个用户）
   4.authentication-mode scheme
   5.local-user user-name（创建本地用户）
   6.password { cipher | simple } password
   7.authorization-attribute level level（用户级别默认为0，3最高）
   8.service-type telnet
   
   ```
7. 配置通过SSH登录(新华三课件)
```
1.system-view
2.public-key local create { dsa | rsa } 生成本地秘钥对
3.ssh server enable 或 stelnet server enable
4.user-interface vty first-number [ last-number ]
5.authentication-mode scheme
6.local-user user-name
7.password { cipher | simple } password
8.authorization-attribute level level（用户级别）
9.service-type ssh（服务类型）
   

   
```

8. **配置通过SSH登录(B站教程)**

   ```
   1.system-view
   2.stelnet server enable
   3.aaa（进入三A账户）
   4.local-user admin password cipher admin@123（设置本地用户名和密码）
   5.local-user admin service-type ssh（设置此用户的服务类型）
   6.local-user admin privilege level 15（设置用户级别）
   7.quit
   8.user-interface vty 0 4（进入虚拟终端）
   9.authentication-mode aaa（认证模式为aaa）
   10.protocol inbound ssh （进入协议未ssh）
   ```

   

## 配置交换机vlan

1. sys 进入配置视图
2. vlan batch 10 20 添加vlan
3. interface gigabiteethnet 0/0/1 进入端口
4. port link-type access 配置端口为access
5. port default vlan 10 将此端口加入到vlan 10 或进入vlan模式批量加 port e0/0/1 to e0/0/3
6. port link-type trunk 配置为trunk模式
7. port trunk allow-pass vlan 10 20 允许通过vlan 1020
8. port trunk pvid vlan 30 配置trunk的缺省vlan
9. int vlanif 10 进入vlan10的子接口
10. ip add 192.168.2.254 24 给vlan10配置ip地址实现三层互通
11. **portswitch 查看接口的交换状态（是二层还是三层）**
12. **ensp中路由器接口默认是二层，用undo portswitch来变三层**



